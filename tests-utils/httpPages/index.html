<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="cs">
  <head>
    <title>Testing page</title>
    <script type="text/javascript">
      dataLayer = [
        {
          'page': {
            'type' : 'Ticket list'
          },
          'searchVariables' : {
            'tickets': {'babies':0, 'kids':0, 'young':0, 'adults':1 },
            'departureDate': '2018-11-01',
            'roundTrip': true,
            'returnDate': '2018-11-05',
            'to': 'LON',
            'from': 'PRG',
          }
        }
      ];

      function submit() {
        var newUrl = document.getElementById('option-url').value
        window.history.pushState('', '', newUrl)
        var app = document.getElementById('flight-watchdog-client-app')
        if (app) {
          app.remove()
        }
        document.getElementsByTagName('html')[0].setAttribute('lang', document.getElementById('option-lang').value)
        document.getElementsByClassName('price')[0].innerHTML = document.getElementById('option-price').value
        document.getElementsByClassName('price')[0].setAttribute('data-default-price', document.getElementById('option-defaultPrice').value)
        var settings = {
          token: document.getElementById('option-token').value,
          initStep: document.getElementById('option-initStep').value,
          apiUrl: document.getElementById('option-apiUrl').value,
          analyticsId: document.getElementById('option-analyticsId').value,
          sentryDns: document.getElementById('option-sentryDns').value
        }
        dataLayer[0].searchVariables.roundTrip = document.getElementById('option-flighttype').value === 'return' ? true : false
        initFlightWatchdogClient(settings)
      }
    </script>
  </head>
  <body>
    <h1>Testing page</h1>
    <div id="top-infopanel" class="d-none d-lg-flex">
      <div class="container-fluid align-self-center">
        <div class="row">
          <div class="col-9 align-self-center">
            <div>Nabídka letů z <strong>Praha (PRG)</strong> do <strong>Londýn (LON)</strong> s odletem <strong>26.07.2019 (+-3&nbsp;dny)</strong> a návratem <strong>02.08.2019 (+-3&nbsp;dny)</strong> pro <strong>1 osobu</strong>.</div>
          </div>
        </div>
      </div>
    </div>
    <p>
      Price:
      <div id="airticket-offer-list">
        <div class="airticketOfferItem">
          <a class="tariff-btn">
            <span>Rezervovat</span>
            <strong class="price">2&nbsp;000 Kč</strong>
          </a>
        </div>
      </div>
    </p>
    <p>
      Options:<br/>
      url: <input name="lang" value="" id="option-url"><br/>
      initStep: <select id="option-initStep">
        <option value="" selected>empty</option>
        <option value="NONE">NONE</option>
        <option value="CREATE_WATCHER_AGREE">CREATE_WATCHER_AGREE</option>
        <option value="CREATE_WATCHER_WORKING">CREATE_WATCHER_WORKING</option>
        <option value="CREATE_WATCHER_DONE">CREATE_WATCHER_DONE</option>
        <option value="REMOVE_WATCHER_BY_ID">REMOVE_WATCHER_BY_ID</option>
        <option value="REMOVE_WATCHER">REMOVE_WATCHER</option>
        <option value="REMOVE_WATCHER_WORKING">REMOVE_WATCHER_WORKING</option>
        <option value="REMOVE_MORE_WATCHERS">REMOVE_MORE_WATCHERS</option>
        <option value="CONTINUE_WATCHING">CONTINUE_WATCHING</option>
        <option value="ERROR">ERROR</option>
      </select><br/>
      apiUrl: <input name="apiUrl" value="http://localhost:3000" id="option-apiUrl"><br/>
      price: <input name="token" value="2 000 Kč" id="option-price"><br/>
      defaultPrice: <input name="token" value="2 000 Kč" id="option-defaultPrice"><br/>
      language: <input name="lang" value="cs" id="option-lang"><br/>
      flight type: <input name="flighttype" value="return" id="option-flighttype"> (return or oneway)<br/>
      token: <input name="token" value="token" id="option-token"><br/>
      analyticsId: <input name="analyticsId" value="false" id="option-analyticsId"><br/>
      sentryDns: <input name="sentryDns" value="false" id="option-sentryDns"><br/>
      <button onclick="submit(this)" id="option-load-button">Load</button>
    </p>

    <script type="text/javascript">
      var font = document.createElement('link');
      font.href = 'https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700&display=swap';
      font.rel = 'stylesheet';
      document.getElementsByTagName('head')[0].appendChild(font);

      font = document.createElement('link');
      font.href = 'https://fonts.googleapis.com/css?family=Lato:700&display=swap" rel="stylesheet';
      font.rel = 'stylesheet';
      document.getElementsByTagName('head')[0].appendChild(font);

      var s = document.createElement('script');
      s.src = 'http://localhost:8080/client/index.js';
      document.getElementsByTagName('head')[0].appendChild(s);
    </script>
  </body>
</html>
